<uib-zone id="home" *ngIf="loginService.complete" class="home">

    <ng-template uib-template="home-logo" let-config>
        <img id="logo" [src]="config.logoLight" *ngIf="config.logoLight && !isDark()">
        <img id="logo" [src]="config.logoDark" *ngIf="config.logoDark && isDark()">
    </ng-template>

    <ng-template uib-template="search-form" let-config>
        <app-search-form
            [autocompleteSources]="config.autocompleteSources"
            [enableVoiceRecognition]="config.enableVoiceRecognition"
            [keepTab]="config.keepTab"
            [enableKeepFilters]="config.enableKeepFilters"
            [keepFilters]="config.keepFilters"
            [enableAdvancedForm]="config.enableAdvancedForm"
            [keepAdvancedSearchFilters]="config.keepAdvancedSearchFilters">
        </app-search-form>
    </ng-template>

    <ng-template uib-template="home-actions">

        <!-- Login/Logout link -->
        <button class="btn btn-link" (click)="toggleLogin()">{{ (loginService.complete ? 'msg#userMenu.logout' : 'msg#userMenu.login') | sqMessage}}</button>

        <span> &bull; </span>

        <!-- Dark mode -->
        <button class="btn btn-link" (click)="toggleDark()">{{ (isDark()? 'msg#home.lightMode' : 'msg#home.darkMode') | sqMessage}}</button>

    </ng-template>

    <ng-template uib-template="recent-documents" let-config>
        <sq-facet-card
            [title]="'msg#recentDocuments.recentDocuments'"
            [collapsible]="false"
            [icon]="'fas fa-file-alt'">
            <sq-facet-recent-documents #facet [maxDocuments]="config.maxItems"></sq-facet-recent-documents>
        </sq-facet-card>
    </ng-template>

    <ng-template uib-template="recent-queries" let-config>
        <sq-facet-card
            [title]="'msg#facet.recentQueries.title'"
            [collapsible]="false"
            [icon]="'fas fa-history'">
            <sq-facet-recent-queries #facet [maxQueries]="config.maxItems"></sq-facet-recent-queries>
        </sq-facet-card>
    </ng-template>

    <ng-template uib-template="saved-queries" let-config>
        <sq-facet-card
            [title]="'msg#savedQueries.savedQueries'"
            [collapsible]="false"
            [icon]="'fas fa-save'">
            <sq-facet-saved-queries #facet [maxQueries]="config.maxItems"></sq-facet-saved-queries>
        </sq-facet-card>
    </ng-template>

    <ng-template uib-template="baskets" let-config>
        <sq-facet-card
            [title]="'msg#baskets.baskets'"
            [collapsible]="false"
            [icon]="'fas fa-inbox'">
            <sq-facet-baskets #facet [maxBaskets]="config.maxItems"></sq-facet-baskets>
        </sq-facet-card>
    </ng-template>

    <ng-template uib-template="global" let-config>
        <sq-global [backgroundColor]="config.backgroundColor" [gradientColor]="config.gradientColor" [backgroundImage]="config.backgroundImage"></sq-global>
    </ng-template>
</uib-zone>

<div class="uib-bootstrap" *ngIf="loginService.complete">
  <!-- bootstrap classes are now allowed here -->
  <sq-ui-builder-toolbar></sq-ui-builder-toolbar>

  <!-- CONFIGURATOR -->

  <uib-configurator>
    <ng-template uib-template="home-logo" let-context>
      <sq-img-selector [context]="context" param="logoLight" description="Logo (light mode)" class="d-block mb-3"></sq-img-selector>
      <sq-img-selector [context]="context" param="logoDark" description="Logo (dark mode)" class="d-block mb-3"></sq-img-selector>
    </ng-template>

    <ng-template uib-template="search-form" let-context>
      <sq-search-form-configurator [context]="context"></sq-search-form-configurator>
    </ng-template>

    <ng-template uib-template="recent-documents" let-context>
      <sq-home-facet-configurator [context]="context"></sq-home-facet-configurator>
    </ng-template>

    <ng-template uib-template="recent-queries" let-context>
      <sq-home-facet-configurator [context]="context"></sq-home-facet-configurator>
    </ng-template>

    <ng-template uib-template="saved-queries" let-context>
      <sq-home-facet-configurator [context]="context"></sq-home-facet-configurator>
    </ng-template>

    <ng-template uib-template="baskets" let-context>
      <sq-home-facet-configurator [context]="context"></sq-home-facet-configurator>
    </ng-template>

    <ng-template uib-template="global" let-context>
      <sq-global-configurator [context]="context"></sq-global-configurator>
    </ng-template>
  </uib-configurator>
</div>
